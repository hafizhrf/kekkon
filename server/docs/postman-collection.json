{
  "info": {
    "name": "Kekkon API",
    "description": "API untuk aplikasi undangan pernikahan digital Kekkon",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "variable": [
    {
      "key": "baseUrl",
      "value": "http://localhost:5000",
      "type": "string"
    },
    {
      "key": "token",
      "value": "",
      "type": "string"
    },
    {
      "key": "adminToken",
      "value": "",
      "type": "string"
    }
  ],
  "item": [
    {
      "name": "Auth",
      "item": [
        {
          "name": "Register",
          "request": {
            "method": "POST",
            "header": [
              {"key": "Content-Type", "value": "application/json"}
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"John Doe\",\n  \"email\": \"john@example.com\",\n  \"password\": \"password123\"\n}"
            },
            "url": "{{baseUrl}}/api/auth/register"
          }
        },
        {
          "name": "Login",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "var jsonData = pm.response.json();",
                  "if (jsonData.token) {",
                  "    pm.collectionVariables.set('token', jsonData.token);",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {"key": "Content-Type", "value": "application/json"}
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"john@example.com\",\n  \"password\": \"password123\"\n}"
            },
            "url": "{{baseUrl}}/api/auth/login"
          }
        },
        {
          "name": "Get Profile",
          "request": {
            "method": "GET",
            "header": [
              {"key": "Authorization", "value": "Bearer {{token}}"}
            ],
            "url": "{{baseUrl}}/api/auth/profile"
          }
        }
      ]
    },
    {
      "name": "Invitations",
      "item": [
        {
          "name": "Get All Invitations",
          "request": {
            "method": "GET",
            "header": [
              {"key": "Authorization", "value": "Bearer {{token}}"}
            ],
            "url": "{{baseUrl}}/api/invitations"
          }
        },
        {
          "name": "Get Invitation by ID",
          "request": {
            "method": "GET",
            "header": [
              {"key": "Authorization", "value": "Bearer {{token}}"}
            ],
            "url": "{{baseUrl}}/api/invitations/:id"
          }
        },
        {
          "name": "Create Invitation",
          "request": {
            "method": "POST",
            "header": [
              {"key": "Authorization", "value": "Bearer {{token}}"},
              {"key": "Content-Type", "value": "application/json"}
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"template_id\": \"geometric-modern\",\n  \"bride_name\": \"Sarah\",\n  \"groom_name\": \"John\",\n  \"wedding_date\": \"2025-06-15\",\n  \"akad_time\": \"08:00\",\n  \"akad_venue\": \"Masjid Al-Ikhlas\",\n  \"akad_address\": \"Jl. Sudirman No. 1\",\n  \"reception_time\": \"11:00\",\n  \"reception_venue\": \"Hotel Grand\",\n  \"reception_address\": \"Jl. Thamrin No. 2\",\n  \"primary_color\": \"#D4A373\",\n  \"secondary_color\": \"#FEFAE0\"\n}"
            },
            "url": "{{baseUrl}}/api/invitations"
          }
        },
        {
          "name": "Update Invitation",
          "request": {
            "method": "PUT",
            "header": [
              {"key": "Authorization", "value": "Bearer {{token}}"},
              {"key": "Content-Type", "value": "application/json"}
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"bride_name\": \"Sarah Updated\",\n  \"groom_name\": \"John Updated\"\n}"
            },
            "url": "{{baseUrl}}/api/invitations/:id"
          }
        },
        {
          "name": "Delete Invitation",
          "request": {
            "method": "DELETE",
            "header": [
              {"key": "Authorization", "value": "Bearer {{token}}"}
            ],
            "url": "{{baseUrl}}/api/invitations/:id"
          }
        },
        {
          "name": "Publish Invitation",
          "request": {
            "method": "POST",
            "header": [
              {"key": "Authorization", "value": "Bearer {{token}}"}
            ],
            "url": "{{baseUrl}}/api/invitations/:id/publish"
          }
        },
        {
          "name": "Get Analytics",
          "request": {
            "method": "GET",
            "header": [
              {"key": "Authorization", "value": "Bearer {{token}}"}
            ],
            "url": "{{baseUrl}}/api/invitations/:id/analytics"
          }
        }
      ]
    },
    {
      "name": "Guests",
      "item": [
        {
          "name": "Get Guests",
          "request": {
            "method": "GET",
            "header": [
              {"key": "Authorization", "value": "Bearer {{token}}"}
            ],
            "url": "{{baseUrl}}/api/invitations/:id/guests"
          }
        },
        {
          "name": "Add Guest",
          "request": {
            "method": "POST",
            "header": [
              {"key": "Authorization", "value": "Bearer {{token}}"},
              {"key": "Content-Type", "value": "application/json"}
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Guest Name\",\n  \"phone\": \"08123456789\"\n}"
            },
            "url": "{{baseUrl}}/api/invitations/:id/guests"
          }
        },
        {
          "name": "Bulk Add Guests",
          "request": {
            "method": "POST",
            "header": [
              {"key": "Authorization", "value": "Bearer {{token}}"},
              {"key": "Content-Type", "value": "application/json"}
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"guests\": [\n    {\"name\": \"Guest 1\", \"phone\": \"08111111111\"},\n    {\"name\": \"Guest 2\", \"phone\": \"08222222222\"}\n  ]\n}"
            },
            "url": "{{baseUrl}}/api/invitations/:id/guests/bulk"
          }
        },
        {
          "name": "Update Guest",
          "request": {
            "method": "PUT",
            "header": [
              {"key": "Authorization", "value": "Bearer {{token}}"},
              {"key": "Content-Type", "value": "application/json"}
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Updated Name\",\n  \"rsvp_status\": \"attending\"\n}"
            },
            "url": "{{baseUrl}}/api/guests/:id"
          }
        },
        {
          "name": "Delete Guest",
          "request": {
            "method": "DELETE",
            "header": [
              {"key": "Authorization", "value": "Bearer {{token}}"}
            ],
            "url": "{{baseUrl}}/api/guests/:id"
          }
        }
      ]
    },
    {
      "name": "Upload",
      "item": [
        {
          "name": "Upload Image",
          "request": {
            "method": "POST",
            "header": [
              {"key": "Authorization", "value": "Bearer {{token}}"}
            ],
            "body": {
              "mode": "formdata",
              "formdata": [
                {
                  "key": "image",
                  "type": "file",
                  "src": ""
                }
              ]
            },
            "url": "{{baseUrl}}/api/upload/image"
          }
        },
        {
          "name": "Upload Music",
          "request": {
            "method": "POST",
            "header": [
              {"key": "Authorization", "value": "Bearer {{token}}"}
            ],
            "body": {
              "mode": "formdata",
              "formdata": [
                {
                  "key": "music",
                  "type": "file",
                  "src": ""
                }
              ]
            },
            "url": "{{baseUrl}}/api/upload/music"
          }
        }
      ]
    },
    {
      "name": "Templates",
      "item": [
        {
          "name": "Get All Templates",
          "request": {
            "method": "GET",
            "url": "{{baseUrl}}/api/templates"
          }
        },
        {
          "name": "Get Template by ID",
          "request": {
            "method": "GET",
            "url": "{{baseUrl}}/api/templates/:id"
          }
        }
      ]
    },
    {
      "name": "Public",
      "item": [
        {
          "name": "Get Public Invitation",
          "request": {
            "method": "GET",
            "url": {
              "raw": "{{baseUrl}}/api/public/:slug?to=Nama Tamu",
              "host": ["{{baseUrl}}"],
              "path": ["api", "public", ":slug"],
              "query": [
                {"key": "to", "value": "Nama Tamu"}
              ]
            }
          }
        },
        {
          "name": "Submit RSVP",
          "request": {
            "method": "POST",
            "header": [
              {"key": "Content-Type", "value": "application/json"}
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Nama Tamu\",\n  \"status\": \"attending\",\n  \"guests_count\": 2,\n  \"message\": \"Selamat menempuh hidup baru!\"\n}"
            },
            "url": "{{baseUrl}}/api/public/:slug/rsvp"
          }
        },
        {
          "name": "Get Messages",
          "request": {
            "method": "GET",
            "url": "{{baseUrl}}/api/public/:slug/messages"
          }
        },
        {
          "name": "Get OG Image",
          "request": {
            "method": "GET",
            "url": "{{baseUrl}}/api/public/:slug/og-image"
          }
        }
      ]
    },
    {
      "name": "Admin",
      "item": [
        {
          "name": "Admin Login",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "var jsonData = pm.response.json();",
                  "if (jsonData.token) {",
                  "    pm.collectionVariables.set('adminToken', jsonData.token);",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {"key": "Content-Type", "value": "application/json"}
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"admin@kekkon.id\",\n  \"password\": \"your-admin-password\"\n}"
            },
            "url": "{{baseUrl}}/api/admin/login"
          }
        },
        {
          "name": "Get Dashboard Stats",
          "request": {
            "method": "GET",
            "header": [
              {"key": "Authorization", "value": "Bearer {{adminToken}}"}
            ],
            "url": "{{baseUrl}}/api/admin/stats"
          }
        },
        {
          "name": "Get All Users",
          "request": {
            "method": "GET",
            "header": [
              {"key": "Authorization", "value": "Bearer {{adminToken}}"}
            ],
            "url": "{{baseUrl}}/api/admin/users"
          }
        },
        {
          "name": "Delete User",
          "request": {
            "method": "DELETE",
            "header": [
              {"key": "Authorization", "value": "Bearer {{adminToken}}"}
            ],
            "url": "{{baseUrl}}/api/admin/users/:id"
          }
        },
        {
          "name": "Get All Invitations (Admin)",
          "request": {
            "method": "GET",
            "header": [
              {"key": "Authorization", "value": "Bearer {{adminToken}}"}
            ],
            "url": "{{baseUrl}}/api/admin/invitations"
          }
        },
        {
          "name": "Delete Invitation (Admin)",
          "request": {
            "method": "DELETE",
            "header": [
              {"key": "Authorization", "value": "Bearer {{adminToken}}"}
            ],
            "url": "{{baseUrl}}/api/admin/invitations/:id"
          }
        }
      ]
    },
    {
      "name": "Health",
      "item": [
        {
          "name": "Health Check",
          "request": {
            "method": "GET",
            "url": "{{baseUrl}}/api/health"
          }
        }
      ]
    }
  ]
}
